# 6.2 for文の基本

for文は、プログラミングで最もよく使われる繰り返し処理の一つです。決まった回数だけ処理を繰り返したいときに特に便利です。

## for文の構造

for文は以下のような構造をしています：

```dart
for (初期化; 条件式; 更新式) {
  // 繰り返し実行したい処理
}
```

それぞれの部分を詳しく見ていきましょう：

1. **初期化**: 繰り返しの最初に一度だけ実行される
2. **条件式**: 繰り返しを続けるかどうかを判断する（trueなら続ける）
3. **更新式**: 各繰り返しの最後に実行される

## 基本的な例

最も基本的なfor文の例を見てみましょう：

```dart
void main() {
  // 0から4まで（5回）繰り返す
  for (int i = 0; i < 5; i++) {
    print('現在のiの値: $i');
  }
}
```

実行結果：
```
現在のiの値: 0
現在のiの値: 1
現在のiの値: 2
現在のiの値: 3
現在のiの値: 4
```

このプログラムの動作を順番に追ってみましょう：

1. `int i = 0` 変数iを0で初期化
2. `i < 5` iが5より小さいか確認（0 < 5はtrue）
3. `print('現在のiの値: $i')` 処理を実行
4. `i++` iを1増やす（元のiの値が0であれば、 i = 1になる）
5. 手順2に戻る

## さまざまなfor文の書き方

### 1から始める場合

```dart
void main() {
  // 1から10まで表示
  for (int i = 1; i <= 10; i++) {
    print(i);
  }
}
```

### 2ずつ増やす場合

```dart
void main() {
  // 偶数だけを表示（0, 2, 4, 6, 8）
  for (int i = 0; i < 10; i += 2) {
    print(i);
  }
}
```

### カウントダウン

```dart
void main() {
  // 10から1までカウントダウン
  for (int i = 10; i >= 1; i--) {
    print('$i...');
  }
  print('発射！');
}
```

## インデックスと値の活用

for文では、カウンタ変数（通常はi）を使って、さまざまな計算や処理ができます。以下はリストの例であり、リストの利用方法は7章で扱います。

```dart
void main() {
  // 配列のようなデータ構造と組み合わせる例
  List<String> fruits = ['りんご', 'バナナ', 'オレンジ'];
  
  for (int i = 0; i < fruits.length; i++) {
    print('${i + 1}番目: ${fruits[i]}');
  }
}
```

実行結果：
```
1番目: りんご
2番目: バナナ
3番目: オレンジ
```

## ネスト（入れ子）のfor文

for文の中に別のfor文を入れることもできます：

```dart
void main() {
  // 掛け算の表を作る（3×3）
  for (int i = 1; i <= 3; i++) {
    for (int j = 1; j <= 3; j++) {
      int result = i * j;
      print('$i × $j = $result');
    }
    print('---'); // 区切り線
  }
}
```

## for文を使った実用的な例

### 合計値の計算

```dart
void main() {
  int sum = 0;
  
  // 1から10までの合計を計算
  for (int i = 1; i <= 10; i++) {
    sum += i;  // sum = sum + i と同じ
  }
  
  print('1から10までの合計: $sum');  // 55
}
```

### 文字列の繰り返し

```dart
void main() {
  String star = '';
  
  // 星を5個並べる
  for (int i = 0; i < 5; i++) {
    star += '★';
    print(star);
  }
}
```

実行結果：
```
★
★★
★★★
★★★★
★★★★★
```

## for文を使う際の注意点

### 1. 無限ループに注意

```dart
// 危険な例（実行しないでください）
// for (int i = 0; i >= 0; i++) {
//   print(i);  // iは増え続けるので、永遠に終わらない
// }
```

### 2. 境界値に注意

```dart
void main() {
  // 注意：<= と < の違い
  print('5回繰り返す（i < 5）:');
  for (int i = 0; i < 5; i++) {
    print(i);  // 0, 1, 2, 3, 4
  }
  
  print('\n6回繰り返す（i <= 5）:');
  for (int i = 0; i <= 5; i++) {
    print(i);  // 0, 1, 2, 3, 4, 5
  }
}
```

## まとめ

for文は、決まった回数の繰り返し処理を簡潔に書くための強力な構文です。以下のポイントを覚えておきましょう：

- 初期化、条件式、更新式の3つの要素で構成される
- カウンタ変数を使って繰り返し回数を制御する
- ネストして使うことで、より複雑な処理も可能
- 境界値と無限ループに注意する

次のセクションでは、条件に基づいて繰り返すwhile文について学習します。
