# 関数とは何か

これまでの章では、変数、条件分岐、繰り返し処理、リスト、マップなど、プログラミングの基本的な要素を学んできました。今回は、プログラムを整理し、効率的にするための重要な概念「関数」について学びます。

## プログラムが長くなると...

これまでに書いたプログラムを思い出してみましょう。プログラムが複雑になるにつれて、次のような問題が出てきます：

```dart
void main() {
  // 成績の平均を計算する（1回目）
  List<int> mathScores = [85, 92, 78, 90, 88];
  int mathTotal = 0;
  for (int score in mathScores) {
    mathTotal += score;
  }
  double mathAverage = mathTotal / mathScores.length;
  print('数学の平均点: ${mathAverage.toStringAsFixed(1)}');
  
  // 成績の平均を計算する（2回目）
  List<int> englishScores = [78, 85, 92, 88, 80];
  int englishTotal = 0;
  for (int score in englishScores) {
    englishTotal += score;
  }
  double englishAverage = englishTotal / englishScores.length;
  print('英語の平均点: ${englishAverage.toStringAsFixed(1)}');
  
  // 同じような処理がまだ続く...
}
```

このコードには問題があります：
- 同じような処理を何度も書いている
- コードが長くなって読みにくい
- 修正が必要な時、すべての箇所を変更しなければならない

## 関数とは

関数は、**特定の処理をまとめて名前を付けたもの**です。一度定義した関数は、何度でも呼び出して使うことができます。

関数のイメージ：
```
関数 = 処理のかたまりに名前を付けたもの

┌─────────────────┐
│   関数の名前      │
├─────────────────┤
│                 │
│  処理の内容       │
│                 │
└─────────────────┘
```

## 日常生活での関数の例

関数は、私たちの日常生活でもよく見かける概念です：

### 1. レシピ
- **関数名**：「カレーを作る」
- **処理内容**：
  1. 野菜を切る
  2. 肉を炒める
  3. 水を加えて煮込む
  4. ルーを入れる

### 2. 自動販売機
- **関数名**：「飲み物を買う」
- **入力**：お金、ボタン番号
- **処理**：商品を選んで提供
- **出力**：飲み物、おつり

### 3. 電卓
- **関数名**：「足し算をする」
- **入力**：2つの数字
- **処理**：数字を足す
- **出力**：計算結果

## 関数を使うメリット

### 1. コードの再利用
同じ処理を何度も書く必要がなくなります：

```dart
// 関数を使わない場合：同じ処理を3回書く
void main() {
  // 1回目
  print('こんにちは！');
  print('今日もプログラミングを楽しみましょう！');
  print('---');
  
  // 2回目
  print('こんにちは！');
  print('今日もプログラミングを楽しみましょう！');
  print('---');
  
  // 3回目
  print('こんにちは！');
  print('今日もプログラミングを楽しみましょう！');
  print('---');
}
```

### 2. プログラムの整理
処理に名前を付けることで、プログラムが読みやすくなります：

```dart
// 関数を使った場合：処理の意味が分かりやすい
void main() {
  挨拶を表示();  // 何をしているか一目で分かる
  計算を実行();
  結果を表示();
}
```

### 3. 保守性の向上
修正が必要な時、関数の中身を変更するだけで済みます：

```dart
// 挨拶の内容を変更したい場合、関数の定義を変えるだけ
void 挨拶を表示() {
  print('おはようございます！');  // ここを変更するだけ
  print('今日も一日頑張りましょう！');
}
```

### 4. エラーの削減
同じ処理を何度も書くと、タイプミスなどのエラーが起きやすくなります。関数を使えば、一箇所で定義した正しい処理を何度でも使えます。

## 関数の基本的な構造

関数は以下の要素で構成されます：

1. **関数名**：関数を識別するための名前
2. **引数（パラメータ）**：関数に渡す値（省略可能）
3. **処理内容**：関数が実行する具体的な処理
4. **戻り値**：関数が返す結果（省略可能）

簡単な例：
```dart
// 関数の定義
void showGreeting() {
  print('こんにちは！');
}

// 関数の呼び出し
void main() {
  showGreeting();  // 「こんにちは！」と表示される
}
```

## Dartの組み込み関数

実は、これまでも関数を使ってきました：

- `print()`：画面に文字を表示する関数
- `toString()`：数値を文字列に変換する関数
- `contains()`：リストに要素が含まれているか確認する関数

これらは、Dartがあらかじめ用意している関数です。私たちも同じように、自分で関数を作ることができます。

## まとめ

関数は、プログラムを整理し、効率的にするための重要な仕組みです：

- **処理をまとめる**：関連する処理を一つにまとめる
- **名前を付ける**：処理に分かりやすい名前を付ける
- **再利用する**：一度定義した処理を何度でも使える
- **保守しやすくする**：修正や改良が簡単になる

次のセクションでは、実際に関数を定義し、使ってみましょう。
